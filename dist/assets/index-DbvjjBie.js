import{r as Je,g as Qe}from"./vendor-BOgQtUoh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();var Ke=Je();const S=Qe(Ke),U=Object.create(null);U.open="0";U.close="1";U.ping="2";U.pong="3";U.message="4";U.upgrade="5";U.noop="6";const Z=Object.create(null);Object.keys(U).forEach(i=>{Z[U[i]]=i});const ae={type:"error",data:"parser error"},Be=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Re=typeof ArrayBuffer=="function",Te=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,de=({type:i,data:e},t,s)=>Be&&e instanceof Blob?t?s(e):ke(e,s):Re&&(e instanceof ArrayBuffer||Te(e))?t?s(e):ke(new Blob([e]),s):s(U[i]+(e||"")),ke=(i,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(i)};function we(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}let ie;function Me(i,e){if(Be&&i.data instanceof Blob)return i.data.arrayBuffer().then(we).then(e);if(Re&&(i.data instanceof ArrayBuffer||Te(i.data)))return e(we(i.data));de(i,!1,t=>{ie||(ie=new TextEncoder),e(ie.encode(t))})}const be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<be.length;i++)z[be.charCodeAt(i)]=i;const We=i=>{let e=i.length*.75,t=i.length,s,r=0,n,o,h,c;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);const v=new ArrayBuffer(e),a=new Uint8Array(v);for(s=0;s<t;s+=4)n=z[i.charCodeAt(s)],o=z[i.charCodeAt(s+1)],h=z[i.charCodeAt(s+2)],c=z[i.charCodeAt(s+3)],a[r++]=n<<2|o>>4,a[r++]=(o&15)<<4|h>>2,a[r++]=(h&3)<<6|c&63;return v},_e=typeof ArrayBuffer=="function",ye=(i,e)=>{if(typeof i!="string")return{type:"message",data:Se(i,e)};const t=i.charAt(0);return t==="b"?{type:"message",data:He(i.substring(1),e)}:Z[t]?i.length>1?{type:Z[t],data:i.substring(1)}:{type:Z[t]}:ae},He=(i,e)=>{if(_e){const t=We(i);return Se(t,e)}else return{base64:!0,data:i}},Se=(i,e)=>{switch(e){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}},Le="",Ye=(i,e)=>{const t=i.length,s=new Array(t);let r=0;i.forEach((n,o)=>{de(n,!1,h=>{s[o]=h,++r===t&&e(s.join(Le))})})},ze=(i,e)=>{const t=i.split(Le),s=[];for(let r=0;r<t.length;r++){const n=ye(t[r],e);if(s.push(n),n.type==="error")break}return s};function Xe(){return new TransformStream({transform(i,e){Me(i,t=>{const s=t.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const n=new DataView(r.buffer);n.setUint8(0,126),n.setUint16(1,s)}else{r=new Uint8Array(9);const n=new DataView(r.buffer);n.setUint8(0,127),n.setBigUint64(1,BigInt(s))}i.data&&typeof i.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let re;function V(i){return i.reduce((e,t)=>e+t.length,0)}function G(i,e){if(i[0].length===e)return i.shift();const t=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)t[r]=i[0][s++],s===i[0].length&&(i.shift(),s=0);return i.length&&s<i[0].length&&(i[0]=i[0].slice(s)),t}function Ve(i,e){re||(re=new TextDecoder);const t=[];let s=0,r=-1,n=!1;return new TransformStream({transform(o,h){for(t.push(o);;){if(s===0){if(V(t)<1)break;const c=G(t,1);n=(c[0]&128)===128,r=c[0]&127,r<126?s=3:r===126?s=1:s=2}else if(s===1){if(V(t)<2)break;const c=G(t,2);r=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(V(t)<8)break;const c=G(t,8),v=new DataView(c.buffer,c.byteOffset,c.length),a=v.getUint32(0);if(a>Math.pow(2,21)-1){h.enqueue(ae);break}r=a*Math.pow(2,32)+v.getUint32(4),s=3}else{if(V(t)<r)break;const c=G(t,r);h.enqueue(ye(n?c:re.decode(c),e)),s=0}if(r===0||r>i){h.enqueue(ae);break}}}})}const Oe=4;function g(i){if(i)return Ge(i)}function Ge(i){for(var e in g.prototype)i[e]=g.prototype[e];return i}g.prototype.on=g.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};g.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};g.prototype.off=g.prototype.removeListener=g.prototype.removeAllListeners=g.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var s,r=0;r<t.length;r++)if(s=t[r],s===e||s.fn===e){t.splice(r,1);break}return t.length===0&&delete this._callbacks["$"+i],this};g.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,r=t.length;s<r;++s)t[s].apply(this,e)}return this};g.prototype.emitReserved=g.prototype.emit;g.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};g.prototype.hasListeners=function(i){return!!this.listeners(i).length};const te=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),T=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ze="arraybuffer";function Ie(i,...e){return e.reduce((t,s)=>(i.hasOwnProperty(s)&&(t[s]=i[s]),t),{})}const je=T.setTimeout,$e=T.clearTimeout;function se(i,e){e.useNativeTimers?(i.setTimeoutFn=je.bind(T),i.clearTimeoutFn=$e.bind(T)):(i.setTimeoutFn=T.setTimeout.bind(T),i.clearTimeoutFn=T.clearTimeout.bind(T))}const et=1.33;function tt(i){return typeof i=="string"?st(i):Math.ceil((i.byteLength||i.size)*et)}function st(i){let e=0,t=0;for(let s=0,r=i.length;s<r;s++)e=i.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function De(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function it(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function rt(i){let e={},t=i.split("&");for(let s=0,r=t.length;s<r;s++){let n=t[s].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}class nt extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class me extends g{constructor(e){super(),this.writable=!1,se(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new nt(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ye(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=it(e);return t.length?"?"+t:""}}class ot extends me{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};ze(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ye(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=De()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Ue=!1;try{Ue=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const at=Ue;function ht(){}class ct extends ot{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(r,n)=>{this.onError("xhr post error",r,n)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class D extends g{constructor(e,t,s){super(),this.createRequest=e,se(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=Ie(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&s.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var r;s.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=D.requestsCount++,D.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ht,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete D.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}D.requestsCount=0;D.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ee);else if(typeof addEventListener=="function"){const i="onpagehide"in T?"pagehide":"unload";addEventListener(i,Ee,!1)}}function Ee(){for(let i in D.requests)D.requests.hasOwnProperty(i)&&D.requests[i].abort()}const lt=function(){const i=Fe({xdomain:!1});return i&&i.responseType!==null}();class ft extends ct{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=lt&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new D(Fe,this.uri(),e)}}function Fe(i){const e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||at))return new XMLHttpRequest}catch{}if(!e)try{return new T[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ne=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pt extends me{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Ne?{}:Ie(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;de(s,this.supportsBinary,n=>{try{this.doWrite(s,n)}catch{}r&&te(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=De()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ne=T.WebSocket||T.MozWebSocket;class ut extends pt{createSocket(e,t,s){return Ne?new ne(e,t,s):t?new ne(e,t):new ne(e)}doWrite(e,t){this.ws.send(t)}}class dt extends me{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Ve(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=Xe();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const n=()=>{s.read().then(({done:h,value:c})=>{h||(this.onPacket(c),n())}).catch(h=>{})};n();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&te(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const yt={websocket:ut,webtransport:dt,polling:ft},mt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,gt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function he(i){if(i.length>8e3)throw"URI too long";const e=i,t=i.indexOf("["),s=i.indexOf("]");t!=-1&&s!=-1&&(i=i.substring(0,t)+i.substring(t,s).replace(/:/g,";")+i.substring(s,i.length));let r=mt.exec(i||""),n={},o=14;for(;o--;)n[gt[o]]=r[o]||"";return t!=-1&&s!=-1&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=At(n,n.path),n.queryKey=kt(n,n.query),n}function At(i,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function kt(i,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,r,n){r&&(t[r]=n)}),t}const ce=typeof addEventListener=="function"&&typeof removeEventListener=="function",j=[];ce&&addEventListener("offline",()=>{j.forEach(i=>i())},!1);class q extends g{constructor(e,t){if(super(),this.binaryType=Ze,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=he(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=he(t.host).host);se(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const r=s.prototype.name;this.transports.push(r),this._transportsByName[r]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rt(this.opts.query)),ce&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},j.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Oe,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&q.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",q.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const r=this.writeBuffer[s].data;if(r&&(t+=tt(r)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,te(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if(typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const n={type:e,data:t,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(q.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ce&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=j.indexOf(this._offlineEventListener);s!==-1&&j.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}q.protocol=Oe;class wt extends q{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;q.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;q.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(a(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=t.name,this.emitReserved("upgradeError",m)}}))};function n(){s||(s=!0,a(),t.close(),t=null)}const o=f=>{const m=new Error("probe error: "+f);m.transport=t.name,n(),this.emitReserved("upgradeError",m)};function h(){o("transport closed")}function c(){o("socket closed")}function v(f){t&&f.name!==t.name&&n()}const a=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",h),this.off("close",c),this.off("upgrading",v)};t.once("open",r),t.once("error",o),t.once("close",h),this.once("close",c),this.once("upgrading",v),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let bt=class extends wt{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(r=>yt[r]).filter(r=>!!r)),super(e,s)}};function Et(i,e="",t){let s=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),s=he(i)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const n=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+n+":"+s.port+e,s.href=s.protocol+"://"+n+(t&&t.port===s.port?"":":"+s.port),s}const Ct=typeof ArrayBuffer=="function",xt=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Pe=Object.prototype.toString,vt=typeof Blob=="function"||typeof Blob<"u"&&Pe.call(Blob)==="[object BlobConstructor]",Bt=typeof File=="function"||typeof File<"u"&&Pe.call(File)==="[object FileConstructor]";function ge(i){return Ct&&(i instanceof ArrayBuffer||xt(i))||vt&&i instanceof Blob||Bt&&i instanceof File}function $(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,s=i.length;t<s;t++)if($(i[t]))return!0;return!1}if(ge(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return $(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&$(i[t]))return!0;return!1}function Rt(i){const e=[],t=i.data,s=i;return s.data=le(t,e),s.attachments=e.length,{packet:s,buffers:e}}function le(i,e){if(!i)return i;if(ge(i)){const t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){const t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=le(i[s],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){const t={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=le(i[s],e));return t}return i}function Tt(i,e){return i.data=fe(i.data,e),delete i.attachments,i}function fe(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=fe(i[t],e);else if(typeof i=="object")for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=fe(i[t],e));return i}const St=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Lt=5;var l;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(l||(l={}));class Ot{constructor(e){this.replacer=e}encode(e){return(e.type===l.EVENT||e.type===l.ACK)&&$(e)?this.encodeAsBinary({type:e.type===l.EVENT?l.BINARY_EVENT:l.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===l.BINARY_EVENT||e.type===l.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Rt(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function Ce(i){return Object.prototype.toString.call(i)==="[object Object]"}class Ae extends g{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===l.BINARY_EVENT;s||t.type===l.BINARY_ACK?(t.type=s?l.EVENT:l.ACK,this.reconstructor=new It(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ge(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(l[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===l.BINARY_EVENT||s.type===l.BINARY_ACK){const n=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(n,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(e.charAt(t+1)==="/"){const n=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(n,t)}else s.nsp="/";const r=e.charAt(t+1);if(r!==""&&Number(r)==r){const n=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}s.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(Ae.isPayloadValid(s.type,n))s.data=n;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case l.CONNECT:return Ce(t);case l.DISCONNECT:return t===void 0;case l.CONNECT_ERROR:return typeof t=="string"||Ce(t);case l.EVENT:case l.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&St.indexOf(t[0])===-1);case l.ACK:case l.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class It{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Tt(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Dt=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ae,Encoder:Ot,get PacketType(){return l},protocol:Lt},Symbol.toStringTag,{value:"Module"}));function O(i,e,t){return i.on(e,t),function(){i.off(e,t)}}const Ut=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qe extends g{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[O(e,"open",this.onopen.bind(this)),O(e,"packet",this.onpacket.bind(this)),O(e,"error",this.onerror.bind(this)),O(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,n;if(Ut.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:l.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const a=this.ids++,f=t.pop();this._registerAckCallback(a,f),o.id=a}const h=(r=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||r===void 0?void 0:r.writable,c=this.connected&&!(!((n=this.io.engine)===null||n===void 0)&&n._hasPingExpired());return this.flags.volatile&&!h||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var s;const r=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(r===void 0){this.acks[e]=t;return}const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let h=0;h<this.sendBuffer.length;h++)this.sendBuffer[h].id===e&&this.sendBuffer.splice(h,1);t.call(this,new Error("operation has timed out"))},r),o=(...h)=>{this.io.clearTimeoutFn(n),t.apply(this,h)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((s,r)=>{const n=(o,h)=>o?r(o):s(h);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((r,...n)=>s!==this._queue[0]?void 0:(r!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(r)):(this._queue.shift(),t&&t(null,...n)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:l.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case l.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case l.EVENT:case l.BINARY_EVENT:this.onevent(e);break;case l.ACK:case l.BINARY_ACK:this.onack(e);break;case l.DISCONNECT:this.ondisconnect();break;case l.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:l.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:l.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function H(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}H.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=(Math.floor(e*10)&1)==0?i-t:i+t}return Math.min(i,this.max)|0};H.prototype.reset=function(){this.attempts=0};H.prototype.setMin=function(i){this.ms=i};H.prototype.setMax=function(i){this.max=i};H.prototype.setJitter=function(i){this.jitter=i};class pe extends g{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,se(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new H({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Dt;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new bt(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=O(t,"open",function(){s.onopen(),e&&e()}),n=h=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",h),e?e(h):this.maybeReconnectOnOpen()},o=O(t,"error",n);if(this._timeout!==!1){const h=this._timeout,c=this.setTimeoutFn(()=>{r(),n(new Error("timeout")),t.close()},h);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(O(e,"ping",this.onping.bind(this)),O(e,"data",this.ondata.bind(this)),O(e,"error",this.onerror.bind(this)),O(e,"close",this.onclose.bind(this)),O(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){te(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new qe(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(r=>{r?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",r)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Y={};function ee(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};const t=Et(i,e.path||"/socket.io"),s=t.source,r=t.id,n=t.path,o=Y[r]&&n in Y[r].nsps,h=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return h?c=new pe(s,e):(Y[r]||(Y[r]=new pe(s,e)),c=Y[r]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(ee,{Manager:pe,Socket:qe,io:ee,connect:ee});const xe=ee();xe.on("connect",()=>{console.log("Connected to server: ",xe.id)});const Ft={type:S.AUTO,width:736,height:608,backgroundColor:"#1d1d1d",pixelArt:!0,physics:{default:"arcade",arcade:{debug:!1}},scene:{preload:Nt,create:Pt,update:qt},scale:{mode:S.Scale.FIT}};let _=80,oe=1,ve=1;function Q(i,e){return`${i},${e}`}let ue=null;function Nt(){this.load.spritesheet("character",new URL("/assets/Prototype_Character-CeCP3SgK.png",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.tilemapTiledJSON("map",new URL("/assets/map-CfSwg4U1.tmj",import.meta.url).href),this.load.image("barrier",new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAQdJREFUWIXtlzEKgzAUhv+E7IJDK5QWOrbgAVzcegqHns3BU3gAb6BjQelQL2EHicRUW2MkEeo/CXnJ/+F7L+ERCIpu9wYGlKQx4d9MNPfDQPmw1+OJ/fmgtCcCGg5Bdcznyg+D7m8z0+Y9CKChxp0lbQDWARjQtpKOdPYzAIN9PKe/h/TtnLoq7adgA1gHgOs5xo25JwWAIsuNQriegyLLAQjPcZHluATXD8IlzGRx8x6AvCCrrkrsjqefhlPjuNZRhH8NwIA2b1O0dFwHMFQ0U4pJN2Z7jFYBQExNQ2MaLUJZKjecyq1pPQU0SWOi0rdLqa5KJGlMKNBOqyYhuDkAEHHBxnj+BoS9b4PaEB1JAAAAAElFTkSuQmCC",import.meta.url).href),this.load.image("tileset1",new URL("/assets/tileset1-BCLDFM6N.png",import.meta.url).href),this.load.image("tileset2",new URL("/assets/tileset2-CUxV-Ac-.png",import.meta.url).href),this.load.image("tileset3",new URL("/assets/tileset3-Du5V4csa.png",import.meta.url).href),this.load.spritesheet("crate",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("bomb",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("explosion",new URL("/assets/explosion-QF2Ass87.png",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("bombUp",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("range",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("speed",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32})}function Pt(){this.lights.enable().setAmbientColor(1052688),this.lights.addLight(80,48,200,16759418,1.5),this.lights.addLight(368,48,200,16759418,1.5),this.lights.addLight(656,48,200,16759418,1.5),this.lights.addLight(80,512,200,16759418,1.5),this.lights.addLight(656,512,200,16759418,1.5),this.lights.addLight(224,288,500,16759418,1.5),this.lights.addLight(528,288,500,16759418,1.5),this.lights.addLight(368,512,500,16759418,.5);const i=this.make.tilemap({key:"map"});this.map=i;const e=i.addTilesetImage("barrier","barrier"),t=i.addTilesetImage("tileset1","tileset1"),s=i.addTilesetImage("tileset2","tileset2"),r=i.addTilesetImage("tileset3","tileset3"),n=i.createLayer("base_color",[e,t,s,r],0,0),o=i.createLayer("floor",[e,t,s,r],0,0),h=i.createLayer("outer_walls",[e,t,s,r],0,0),c=i.createLayer("barriers",[e,t,s,r],0,0),v=i.createLayer("decor",[e,t,s,r],0,0),a=i.getObjectLayer("player_spawn"),f=i.getObjectLayer("collision");n.setPipeline("Light2D"),o.setPipeline("Light2D"),h.setPipeline("Light2D"),c.setPipeline("Light2D"),v.setPipeline("Light2D");function m(y,p,A="noSpawn"){const k=new Set;return p.forEach(d=>{var B;(B=d==null?void 0:d.objects)!=null&&B.forEach&&d.objects.forEach(E=>{var R;if((R=E.properties)==null?void 0:R.some(C=>C.name===A&&C.value===!0)){const C=Math.floor(E.x/y.tileWidth),L=Math.floor(E.y/y.tileHeight);k.add(Q(C,L))}})}),k}this.blockedTiles=m(i,[a,f]);function K(y,p,A="noSpawn",k="playerSpawn"){const d=new Set;return p.forEach(B=>{var E;(E=B==null?void 0:B.objects)!=null&&E.forEach&&B.objects.forEach(u=>{var L,I;const R=(L=u.properties)==null?void 0:L.some(b=>b.name===A&&b.value===!0),C=(I=u.properties)==null?void 0:I.some(b=>b.name===k&&b.value===!1);if(R&&C){const b=Math.floor(u.x/y.tileWidth),x=Math.floor(u.y/y.tileHeight);d.add(Q(b,x))}})}),d}this.blockedWallTiles=K(i,[a,f]);const F=["front","right","left","back"],N={idle:{startFrames:{front:0,right:16,left:32,back:48},frameRate:3},walk:{startFrames:{front:1,right:17,left:33,back:49},frameRate:7},damage:{startFrames:{front:2,right:18,left:34,back:50},frameRate:7},death:{startFrames:{front:3,right:19,left:35,back:51},frameRate:7}};for(const[y,{startFrames:p,frameRate:A}]of Object.entries(N))F.forEach(k=>{const d=p[k];this.anims.create({key:`${y}-${k}`,frames:[{key:"character",frame:d},{key:"character",frame:d+4},{key:"character",frame:d+8},{key:"character",frame:d+12}],frameRate:A,repeat:y==="death"?0:y==="damage"?1:-1})});this.player=this.physics.add.sprite(48,80,"character"),this.player.isDead=!1,this.player.setDepth(1),this.player.setScale(2),this.player.body.setSize(8,12).setOffset(12,11),this.player.setCollideWorldBounds(!0),this.player.setPipeline("Light2D"),this.playerLight=this.lights.addLight(this.player.x,this.player.y,100,16759418,.5),this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys({up:S.Input.Keyboard.KeyCodes.W,left:S.Input.Keyboard.KeyCodes.A,down:S.Input.Keyboard.KeyCodes.S,right:S.Input.Keyboard.KeyCodes.D}),this.lastFacedDirection="idle-front",this.player.play(this.lastFacedDirection),f.objects.forEach(y=>{const p=y.width,A=y.height,k=this.add.rectangle(y.x+y.width/2,y.y+y.height/2,p,A);this.physics.add.existing(k,!0),this.physics.add.collider(this.player,k)}),this.anims.create({key:"crate-explode",frames:[{key:"crate",frame:0},{key:"crate",frame:1},{key:"crate",frame:2},{key:"crate",frame:3},{key:"crate",frame:4}],frameRate:10,repeat:0});function w(y,p,A,k,d,B,E){const u=p.width,R=p.height;let C=0;const L=new Set;for(let I=0;I<R;I++)for(let b=0;b<u;b++){if(C>=B)return L;const x=Q(b,I);if(!A.has(x)&&Math.random()<E){const W=p.tileToWorldX(b),X=p.tileToWorldY(I),J=y.crates.create(W+p.tileWidth/2,X+p.tileHeight/2,d);J.body.setSize(J.width,J.height).setOffset(0,0),J.setDepth(0),J.setPipeline("Light2D"),J.setTint(11184810),k.add(J),C++,L.add(x)}}return L}const P=250,M=.85;this.crates=this.physics.add.staticGroup(),ue=w(this,i,this.blockedTiles,this.crates,"crate",P,M),this.physics.add.collider(this.player,this.crates),this.anims.create({key:"bomb-idle",frames:this.anims.generateFrameNumbers("bomb",{start:0,end:7}),frameRate:10,repeat:-1}),this.spaceKey=this.input.keyboard.addKey(S.Input.Keyboard.KeyCodes.SPACE),this.bombs=this.physics.add.group(),this.occupiedBombTile=new Set,this.bombsPlaced=0,this.anims.create({key:"explosion-origin",frames:[{key:"explosion",frame:0},{key:"explosion",frame:7},{key:"explosion",frame:14},{key:"explosion",frame:21},{key:"explosion",frame:28},{key:"explosion",frame:35},{key:"explosion",frame:42},{key:"explosion",frame:49},{key:"explosion",frame:56},{key:"explosion",frame:63},{key:"explosion",frame:70},{key:"explosion",frame:77},{key:"explosion",frame:84}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-mid-vertical",frames:[{key:"explosion",frame:1},{key:"explosion",frame:8},{key:"explosion",frame:15},{key:"explosion",frame:22},{key:"explosion",frame:29},{key:"explosion",frame:36},{key:"explosion",frame:43},{key:"explosion",frame:50},{key:"explosion",frame:57},{key:"explosion",frame:64},{key:"explosion",frame:71},{key:"explosion",frame:78},{key:"explosion",frame:85}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-mid-horizontal",frames:[{key:"explosion",frame:2},{key:"explosion",frame:9},{key:"explosion",frame:16},{key:"explosion",frame:23},{key:"explosion",frame:30},{key:"explosion",frame:37},{key:"explosion",frame:44},{key:"explosion",frame:51},{key:"explosion",frame:58},{key:"explosion",frame:65},{key:"explosion",frame:72},{key:"explosion",frame:79},{key:"explosion",frame:86}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-up",frames:[{key:"explosion",frame:3},{key:"explosion",frame:10},{key:"explosion",frame:17},{key:"explosion",frame:24},{key:"explosion",frame:31},{key:"explosion",frame:38},{key:"explosion",frame:45},{key:"explosion",frame:52},{key:"explosion",frame:59},{key:"explosion",frame:66},{key:"explosion",frame:73},{key:"explosion",frame:80},{key:"explosion",frame:87}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-down",frames:[{key:"explosion",frame:4},{key:"explosion",frame:11},{key:"explosion",frame:18},{key:"explosion",frame:25},{key:"explosion",frame:32},{key:"explosion",frame:39},{key:"explosion",frame:46},{key:"explosion",frame:53},{key:"explosion",frame:60},{key:"explosion",frame:67},{key:"explosion",frame:74},{key:"explosion",frame:81},{key:"explosion",frame:88}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-left",frames:[{key:"explosion",frame:5},{key:"explosion",frame:12},{key:"explosion",frame:19},{key:"explosion",frame:26},{key:"explosion",frame:33},{key:"explosion",frame:40},{key:"explosion",frame:47},{key:"explosion",frame:54},{key:"explosion",frame:61},{key:"explosion",frame:68},{key:"explosion",frame:75},{key:"explosion",frame:82},{key:"explosion",frame:89}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-right",frames:[{key:"explosion",frame:6},{key:"explosion",frame:13},{key:"explosion",frame:20},{key:"explosion",frame:27},{key:"explosion",frame:34},{key:"explosion",frame:41},{key:"explosion",frame:48},{key:"explosion",frame:55},{key:"explosion",frame:62},{key:"explosion",frame:69},{key:"explosion",frame:76},{key:"explosion",frame:83},{key:"explosion",frame:90}],frameRate:20,repeat:0})}function qt(){if(this.player.isDead)return;const i=this.player,e=this.cursors,t=this.wasd;if(i.setVelocity(0),[e.left.isDown||t.left.isDown,e.right.isDown||t.right.isDown,e.up.isDown||t.up.isDown,e.down.isDown||t.down.isDown].filter(Boolean).length>1){i.play(this.lastFacedDirection,!0);return}e.left.isDown||t.left.isDown?(i.setVelocityX(-_),i.anims.play("walk-left",!0),this.lastFacedDirection="idle-left"):e.right.isDown||t.right.isDown?(i.setVelocityX(_),i.anims.play("walk-right",!0),this.lastFacedDirection="idle-right"):e.up.isDown||t.up.isDown?(i.setVelocityY(-_),i.anims.play("walk-back",!0),this.lastFacedDirection="idle-back"):e.down.isDown||t.down.isDown?(i.setVelocityY(_),i.anims.play("walk-front",!0),this.lastFacedDirection="idle-front"):i.play(this.lastFacedDirection,!0),this.playerLight.x=this.player.x,this.playerLight.y=this.player.y;const r=[{type:null,chance:.5},{type:"speed",chance:.18},{type:"range",chance:.18},{type:"bombUp",chance:.14}],n={bombUp:()=>oe++,speed:()=>_+=10,range:()=>ve++};function o(){const a=Math.random();let f=0;for(const m of r)if(f+=m.chance,a<f)return m.type}function h(a,f,m,K,F){const N=new Set,w=new Map,P=new Map;let M=Q(m.x,m.y);const y=[{x:0,y:-1,name:"up",mid:"vertical"},{x:0,y:1,name:"down",mid:"vertical"},{x:-1,y:0,name:"left",mid:"horizontal"},{x:1,y:0,name:"right",mid:"horizontal"}];y.forEach(p=>{var k;let A=null;for(let d=1;d<=F;d++){const B=m.x+p.x*d,E=m.y+p.y*d,u=Q(B,E);if(K.has(u))break;if(ue.has(u)){N.add(u),w.set(u,p.mid);const[R,C]=u.split(",").map(Number),L=f.tileToWorldX(R)+f.tileWidth/2,I=f.tileToWorldY(C)+f.tileHeight/2,b=a.crates.getChildren().find(x=>S.Math.Fuzzy.Equal(x.x,L,1)&&S.Math.Fuzzy.Equal(x.y,I,1));if(b){b.play("crate-explode"),b.on("animationcomplete",()=>{b.destroy()});let x=o();if(x!==null){let W=a.physics.add.sprite(L,I,x);W.body.immovable=!0,W.body.moves=!1,a.physics.add.overlap(a.player,W,()=>{var X;(X=n[x])==null||X.call(n),x==="bombUp"&&console.log(`Bomb Count: ${oe}`),x==="speed"&&console.log(`Speed: ${_}`),x==="range"&&console.log(`Range: ${F}`),W.destroy()})}}ue.delete(u);break}N.add(u),w.set(u,p.mid),A=u}A&&P.set(A,((k=y.find(d=>Q(m.x+d.x*F,m.y+d.y*F)===A))==null?void 0:k.name)||p.name)}),N.add(M),N.forEach(p=>{const[A,k]=p.split(",").map(Number),d=f.tileToWorldX(A)+f.tileWidth/2,B=f.tileToWorldY(k)+f.tileHeight/2;let E="explosion-mid-horizontal";p===M?E="explosion-origin":P.has(p)?E=`explosion-end-${P.get(p)}`:E=`explosion-mid-${w.get(p)}`;const u=a.physics.add.sprite(d,B,"explosion");a.explosions||(a.explosions=a.physics.add.group()),a.explosions.add(u),a.physics.add.overlap(a.player,u,()=>{if(!a.player.isDead){a.player.isDead=!0,a.player.setVelocity(0);const R=a.add.sprite(a.player.x,a.player.y,"character").setScale(a.player.scaleX).setFrame(a.player.anims.currentFrame.index).setTint(16777215).setAlpha(1).setBlendMode(S.BlendModes.ADD).setDepth(a.player.depth+1);a.time.delayedCall(300,()=>R.destroy());const C=a.lastFacedDirection.replace("idle-","");a.player.anims.play(`damage-${C}`,!0),a.time.delayedCall(500,()=>{a.player.anims.play(`death-${C}`,!0)}),a.player.body.enable=!1,a.time.delayedCall(1200,()=>{a.player.destroy(),a.lights.removeLight(a.playerLight)})}},null,a),u.setTint(16773058),u.setBlendMode(S.BlendModes.ADD),u.play(E),u.on("animationcomplete",()=>{u.destroy()})})}this.nextBombTime||(this.nextBombTime=0);const c=this.time.now,v=0;if(this.spaceKey.isDown&&c>this.nextBombTime){this.nextBombTime=c+v;const a=this.player.getCenter(),f=this.map.worldToTileXY(a.x,a.y),m=`${f.x},${f.y}`;if(this.occupiedBombTile.has(m)||this.bombsPlaced>=oe)return;const K=this.map.tileToWorldXY(f.x,f.y),F=K.x+this.map.tileWidth/2,N=K.y+this.map.tileHeight/2,w=this.physics.add.sprite(F,N,"bomb");w.body.immovable=!0,w.body.moves=!1,w.play("bomb-idle"),this.bombs.add(w);const P=this.physics.add.collider(this.player,w);P.active=!1;const M=m,y=this.time.addEvent({delay:50,loop:!0,callback:()=>{const A=this.map.worldToTileXY(this.player.x,this.player.y);Q(A.x,A.y)!==M&&(P.active=!0)}}),p=this.add.sprite(w.x,w.y,"bombGlow");p.setScale(1.8),p.setAlpha(.5),p.setDepth(w.depth-1),w.setTint(16764057),this.occupiedBombTile.add(m),this.bombsPlaced++,this.time.delayedCall(3500,()=>{this.occupiedBombTile.delete(m),this.lights.removeLight(w.light),this.bombsPlaced--,y.remove(),w.destroy(),h(this,this.map,f,this.blockedWallTiles,ve)})}}new S.Game(Ft);
