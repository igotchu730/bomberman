import{r as H,g as S}from"./vendor-BOgQtUoh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const y of l.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var N=H();const k=S(N),v={type:k.AUTO,width:736,height:608,backgroundColor:"#1d1d1d",pixelArt:!0,physics:{default:"arcade",arcade:{debug:!1}},scene:{preload:O,create:U,update:T},scale:{mode:k.Scale.FIT}};function D(s,t){return`${s},${t}`}function O(){this.load.spritesheet("character",new URL("/assets/Prototype_Character-CeCP3SgK.png",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.tilemapTiledJSON("map",new URL("/assets/map-CfSwg4U1.tmj",import.meta.url).href),this.load.image("barrier",new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAQdJREFUWIXtlzEKgzAUhv+E7IJDK5QWOrbgAVzcegqHns3BU3gAb6BjQelQL2EHicRUW2MkEeo/CXnJ/+F7L+ERCIpu9wYGlKQx4d9MNPfDQPmw1+OJ/fmgtCcCGg5Bdcznyg+D7m8z0+Y9CKChxp0lbQDWARjQtpKOdPYzAIN9PKe/h/TtnLoq7adgA1gHgOs5xo25JwWAIsuNQriegyLLAQjPcZHluATXD8IlzGRx8x6AvCCrrkrsjqefhlPjuNZRhH8NwIA2b1O0dFwHMFQ0U4pJN2Z7jFYBQExNQ2MaLUJZKjecyq1pPQU0SWOi0rdLqa5KJGlMKNBOqyYhuDkAEHHBxnj+BoS9b4PaEB1JAAAAAElFTkSuQmCC",import.meta.url).href),this.load.image("tileset1",new URL("/assets/tileset1-BCLDFM6N.png",import.meta.url).href),this.load.image("tileset2",new URL("/assets/tileset2-CUxV-Ac-.png",import.meta.url).href),this.load.image("tileset3",new URL("/assets/tileset3-Du5V4csa.png",import.meta.url).href),this.load.spritesheet("crate",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("bomb",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("explosion",new URL("/assets/explosion-B0u6q9-l.png",import.meta.url).href,{frameWidth:32,frameHeight:32})}function U(){this.lights.enable().setAmbientColor(1052688),this.lights.addLight(80,48,200,16759418,1.5),this.lights.addLight(368,48,200,16759418,1.5),this.lights.addLight(656,48,200,16759418,1.5),this.lights.addLight(80,512,200,16759418,1.5),this.lights.addLight(656,512,200,16759418,1.5),this.lights.addLight(224,288,500,16759418,1.5),this.lights.addLight(528,288,500,16759418,1.5),this.lights.addLight(368,512,500,16759418,.5);const s=this.make.tilemap({key:"map"});this.map=s;const t=s.addTilesetImage("barrier","barrier"),r=s.addTilesetImage("tileset1","tileset1"),i=s.addTilesetImage("tileset2","tileset2"),o=s.addTilesetImage("tileset3","tileset3"),l=s.createLayer("base_color",[t,r,i,o],0,0),y=s.createLayer("floor",[t,r,i,o],0,0),c=s.createLayer("outer_walls",[t,r,i,o],0,0),d=s.createLayer("barriers",[t,r,i,o],0,0),C=s.createLayer("decor",[t,r,i,o],0,0),u=s.getObjectLayer("player_spawn"),x=s.getObjectLayer("collision");l.setPipeline("Light2D"),y.setPipeline("Light2D"),c.setPipeline("Light2D"),d.setPipeline("Light2D"),C.setPipeline("Light2D");function h(e,f,A="noSpawn"){const a=new Set;return f.forEach(n=>{var m;(m=n==null?void 0:n.objects)!=null&&m.forEach&&n.objects.forEach(p=>{var I;if((I=p.properties)==null?void 0:I.some(L=>L.name===A&&L.value===!0)){const L=Math.floor(p.x/e.tileWidth),P=Math.floor(p.y/e.tileHeight);a.add(D(L,P))}})}),a}this.blockedTiles=h(s,[u,x]);function g(e,f,A="noSpawn",a="playerSpawn"){const n=new Set;return f.forEach(m=>{var p;(p=m==null?void 0:m.objects)!=null&&p.forEach&&m.objects.forEach(w=>{var P,R;const I=(P=w.properties)==null?void 0:P.some(b=>b.name===A&&b.value===!0),L=(R=w.properties)==null?void 0:R.some(b=>b.name===a&&b.value===!1);if(I&&L){const b=Math.floor(w.x/e.tileWidth),F=Math.floor(w.y/e.tileHeight);n.add(D(b,F))}})}),n}this.blockedWallTiles=g(s,[u,x]);const B=["front","right","left","back"],E={idle:{startFrames:{front:0,right:16,left:32,back:48},frameRate:3},walk:{startFrames:{front:1,right:17,left:33,back:49},frameRate:7},damage:{startFrames:{front:2,right:18,left:34,back:50},frameRate:7},death:{startFrames:{front:3,right:19,left:35,back:51},frameRate:7}};for(const[e,{startFrames:f,frameRate:A}]of Object.entries(E))B.forEach(a=>{const n=f[a];this.anims.create({key:`${e}-${a}`,frames:[{key:"character",frame:n},{key:"character",frame:n+4},{key:"character",frame:n+8},{key:"character",frame:n+12}],frameRate:A,repeat:-1})});this.player=this.physics.add.sprite(48,80,"character"),this.player.setScale(2),this.player.body.setSize(10,10).setOffset(11,13),this.player.setCollideWorldBounds(!0),this.player.setPipeline("Light2D"),this.playerLight=this.lights.addLight(this.player.x,this.player.y,100,16759418,.7),this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys({up:k.Input.Keyboard.KeyCodes.W,left:k.Input.Keyboard.KeyCodes.A,down:k.Input.Keyboard.KeyCodes.S,right:k.Input.Keyboard.KeyCodes.D}),this.lastFacedDirection="idle-front",this.player.play(this.lastFacedDirection),x.objects.forEach(e=>{const f=this.add.rectangle(e.x+e.width/2,e.y+e.height/2,e.width,e.height);this.physics.add.existing(f,!0),this.physics.add.collider(this.player,f)}),this.crates=this.physics.add.group(),this.physics.add.collider(this.player,this.crates),this.anims.create({key:"bomb-idle",frames:this.anims.generateFrameNumbers("bomb",{start:0,end:7}),frameRate:10,repeat:-1}),this.spaceKey=this.input.keyboard.addKey(k.Input.Keyboard.KeyCodes.SPACE),this.bombs=this.physics.add.group(),this.occupiedBombTile=new Set,this.bombCount=5,this.bombsPlaced=0,this.anims.create({key:"explosion-origin",frames:[{key:"explosion",frame:0},{key:"explosion",frame:7},{key:"explosion",frame:14},{key:"explosion",frame:21},{key:"explosion",frame:28},{key:"explosion",frame:35},{key:"explosion",frame:42},{key:"explosion",frame:49},{key:"explosion",frame:56},{key:"explosion",frame:63},{key:"explosion",frame:70},{key:"explosion",frame:77},{key:"explosion",frame:84}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-mid-vertical",frames:[{key:"explosion",frame:1},{key:"explosion",frame:8},{key:"explosion",frame:15},{key:"explosion",frame:22},{key:"explosion",frame:29},{key:"explosion",frame:36},{key:"explosion",frame:43},{key:"explosion",frame:50},{key:"explosion",frame:57},{key:"explosion",frame:64},{key:"explosion",frame:71},{key:"explosion",frame:78},{key:"explosion",frame:85}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-mid-horizontal",frames:[{key:"explosion",frame:2},{key:"explosion",frame:9},{key:"explosion",frame:16},{key:"explosion",frame:23},{key:"explosion",frame:30},{key:"explosion",frame:37},{key:"explosion",frame:44},{key:"explosion",frame:51},{key:"explosion",frame:58},{key:"explosion",frame:65},{key:"explosion",frame:72},{key:"explosion",frame:79},{key:"explosion",frame:86}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-end-up",frames:[{key:"explosion",frame:3},{key:"explosion",frame:10},{key:"explosion",frame:17},{key:"explosion",frame:24},{key:"explosion",frame:31},{key:"explosion",frame:38},{key:"explosion",frame:45},{key:"explosion",frame:52},{key:"explosion",frame:59},{key:"explosion",frame:66},{key:"explosion",frame:73},{key:"explosion",frame:80},{key:"explosion",frame:87}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-end-down",frames:[{key:"explosion",frame:4},{key:"explosion",frame:11},{key:"explosion",frame:18},{key:"explosion",frame:25},{key:"explosion",frame:32},{key:"explosion",frame:39},{key:"explosion",frame:46},{key:"explosion",frame:53},{key:"explosion",frame:60},{key:"explosion",frame:67},{key:"explosion",frame:74},{key:"explosion",frame:81},{key:"explosion",frame:88}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-end-left",frames:[{key:"explosion",frame:5},{key:"explosion",frame:12},{key:"explosion",frame:19},{key:"explosion",frame:26},{key:"explosion",frame:33},{key:"explosion",frame:40},{key:"explosion",frame:47},{key:"explosion",frame:54},{key:"explosion",frame:61},{key:"explosion",frame:68},{key:"explosion",frame:75},{key:"explosion",frame:82},{key:"explosion",frame:89}],frameRate:15,repeat:0}),this.anims.create({key:"explosion-end-right",frames:[{key:"explosion",frame:6},{key:"explosion",frame:13},{key:"explosion",frame:20},{key:"explosion",frame:27},{key:"explosion",frame:34},{key:"explosion",frame:41},{key:"explosion",frame:48},{key:"explosion",frame:55},{key:"explosion",frame:62},{key:"explosion",frame:69},{key:"explosion",frame:76},{key:"explosion",frame:83},{key:"explosion",frame:90}],frameRate:15,repeat:0}),this.explosionRadius=7}function T(){const t=this.player,r=this.cursors,i=this.wasd;if(t.setVelocity(0),[r.left.isDown||i.left.isDown,r.right.isDown||i.right.isDown,r.up.isDown||i.up.isDown,r.down.isDown||i.down.isDown].filter(Boolean).length>1){t.play(this.lastFacedDirection,!0);return}r.left.isDown||i.left.isDown?(t.setVelocityX(-80),t.anims.play("walk-left",!0),this.lastFacedDirection="idle-left"):r.right.isDown||i.right.isDown?(t.setVelocityX(80),t.anims.play("walk-right",!0),this.lastFacedDirection="idle-right"):r.up.isDown||i.up.isDown?(t.setVelocityY(-80),t.anims.play("walk-back",!0),this.lastFacedDirection="idle-back"):r.down.isDown||i.down.isDown?(t.setVelocityY(80),t.anims.play("walk-front",!0),this.lastFacedDirection="idle-front"):t.play(this.lastFacedDirection,!0),this.playerLight.x=this.player.x,this.playerLight.y=this.player.y;function l(y,c,d,C,u){const x=new Set,h=new Map,g=new Map;let B=D(d.x,d.y);const E=[{x:0,y:-1,name:"up",mid:"vertical"},{x:0,y:1,name:"down",mid:"vertical"},{x:-1,y:0,name:"left",mid:"horizontal"},{x:1,y:0,name:"right",mid:"horizontal"}];E.forEach(e=>{var A;let f=null;for(let a=1;a<=u;a++){const n=d.x+e.x*a,m=d.y+e.y*a,p=D(n,m);if(C.has(p))break;x.add(p),h.set(p,e.mid),f=p}f&&g.set(f,((A=E.find(a=>D(d.x+a.x*u,d.y+a.y*u)===f))==null?void 0:A.name)||e.name)}),x.add(B),x.forEach(e=>{const[f,A]=e.split(",").map(Number),a=c.tileToWorldX(f)+c.tileWidth/2,n=c.tileToWorldY(A)+c.tileHeight/2;let m="explosion-mid-horizontal";e===B?m="explosion-origin":g.has(e)?m=`explosion-end-${g.get(e)}`:m=`explosion-mid-${h.get(e)}`;const p=y.physics.add.sprite(a,n,"explosion");p.play(m),p.on("animationcomplete",()=>{p.destroy()})})}if(this.spaceKey,k.Input.Keyboard.JustDown(this.spaceKey)){const y=this.player.getCenter(),c=this.map.worldToTileXY(y.x,y.y),d=`${c.x},${c.y}`;if(this.occupiedBombTile.has(d)||this.bombsPlaced>=this.bombCount)return;const C=this.map.tileToWorldXY(c.x,c.y),u=C.x+this.map.tileWidth/2,x=C.y+this.map.tileHeight/2,h=this.physics.add.sprite(u,x,"bomb");h.play("bomb-idle");const g=this.add.sprite(h.x,h.y,"bombGlow");g.setScale(1.8),g.setAlpha(.5),g.setDepth(h.depth-1),h.setTint(16764057),this.bombs.add(h),this.occupiedBombTile.add(d),this.bombsPlaced++,this.time.delayedCall(3500,()=>{this.occupiedBombTile.delete(d),this.lights.removeLight(h.light),this.bombsPlaced--,h.destroy(),l(this,this.map,c,this.blockedWallTiles,this.explosionRadius)})}}new k.Game(v);
