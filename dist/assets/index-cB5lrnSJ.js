import{r as K,g as X}from"./vendor-BOgQtUoh.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const p of s)if(p.type==="childList")for(const e of p.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&n(e)}).observe(document,{childList:!0,subtree:!0});function f(s){const p={};return s.integrity&&(p.integrity=s.integrity),s.referrerPolicy&&(p.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?p.credentials="include":s.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function n(s){if(s.ep)return;s.ep=!0;const p=f(s);fetch(s.href,p)}})();var W=K();const k=X(W),O={type:k.AUTO,width:736,height:608,backgroundColor:"#1d1d1d",pixelArt:!0,physics:{default:"arcade",arcade:{debug:!1}},scene:{preload:N,create:Y,update:q},scale:{mode:k.Scale.FIT}};function Q(a,o){return`${a},${o}`}let T=null;function N(){this.load.spritesheet("character",new URL("/assets/Prototype_Character-CeCP3SgK.png",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.tilemapTiledJSON("map",new URL("/assets/map-CfSwg4U1.tmj",import.meta.url).href),this.load.image("barrier",new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAQdJREFUWIXtlzEKgzAUhv+E7IJDK5QWOrbgAVzcegqHns3BU3gAb6BjQelQL2EHicRUW2MkEeo/CXnJ/+F7L+ERCIpu9wYGlKQx4d9MNPfDQPmw1+OJ/fmgtCcCGg5Bdcznyg+D7m8z0+Y9CKChxp0lbQDWARjQtpKOdPYzAIN9PKe/h/TtnLoq7adgA1gHgOs5xo25JwWAIsuNQriegyLLAQjPcZHluATXD8IlzGRx8x6AvCCrrkrsjqefhlPjuNZRhH8NwIA2b1O0dFwHMFQ0U4pJN2Z7jFYBQExNQ2MaLUJZKjecyq1pPQU0SWOi0rdLqa5KJGlMKNBOqyYhuDkAEHHBxnj+BoS9b4PaEB1JAAAAAElFTkSuQmCC",import.meta.url).href),this.load.image("tileset1",new URL("/assets/tileset1-BCLDFM6N.png",import.meta.url).href),this.load.image("tileset2",new URL("/assets/tileset2-CUxV-Ac-.png",import.meta.url).href),this.load.image("tileset3",new URL("/assets/tileset3-Du5V4csa.png",import.meta.url).href),this.load.spritesheet("crate",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("bomb",new URL("data:image/png;base64,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",import.meta.url).href,{frameWidth:32,frameHeight:32}),this.load.spritesheet("explosion",new URL("/assets/explosion-QF2Ass87.png",import.meta.url).href,{frameWidth:32,frameHeight:32})}function Y(){this.lights.enable().setAmbientColor(1052688),this.lights.addLight(80,48,200,16759418,1.5),this.lights.addLight(368,48,200,16759418,1.5),this.lights.addLight(656,48,200,16759418,1.5),this.lights.addLight(80,512,200,16759418,1.5),this.lights.addLight(656,512,200,16759418,1.5),this.lights.addLight(224,288,500,16759418,1.5),this.lights.addLight(528,288,500,16759418,1.5),this.lights.addLight(368,512,500,16759418,.5);const a=this.make.tilemap({key:"map"});this.map=a;const o=a.addTilesetImage("barrier","barrier"),f=a.addTilesetImage("tileset1","tileset1"),n=a.addTilesetImage("tileset2","tileset2"),s=a.addTilesetImage("tileset3","tileset3"),p=a.createLayer("base_color",[o,f,n,s],0,0),e=a.createLayer("floor",[o,f,n,s],0,0),h=a.createLayer("outer_walls",[o,f,n,s],0,0),y=a.createLayer("barriers",[o,f,n,s],0,0),I=a.createLayer("decor",[o,f,n,s],0,0),D=a.getObjectLayer("player_spawn"),w=a.getObjectLayer("collision");p.setPipeline("Light2D"),e.setPipeline("Light2D"),h.setPipeline("Light2D"),y.setPipeline("Light2D"),I.setPipeline("Light2D");function d(t,l,c="noSpawn"){const i=new Set;return l.forEach(r=>{var x;(x=r==null?void 0:r.objects)!=null&&x.forEach&&r.objects.forEach(C=>{var u;if((u=C.properties)==null?void 0:u.some(A=>A.name===c&&A.value===!0)){const A=Math.floor(C.x/t.tileWidth),L=Math.floor(C.y/t.tileHeight);i.add(Q(A,L))}})}),i}this.blockedTiles=d(a,[D,w]);function b(t,l,c="noSpawn",i="playerSpawn"){const r=new Set;return l.forEach(x=>{var C;(C=x==null?void 0:x.objects)!=null&&C.forEach&&x.objects.forEach(E=>{var L,v;const u=(L=E.properties)==null?void 0:L.some(g=>g.name===c&&g.value===!0),A=(v=E.properties)==null?void 0:v.some(g=>g.name===i&&g.value===!1);if(u&&A){const g=Math.floor(E.x/t.tileWidth),H=Math.floor(E.y/t.tileHeight);r.add(Q(g,H))}})}),r}this.blockedWallTiles=b(a,[D,w]);const P=["front","right","left","back"],R={idle:{startFrames:{front:0,right:16,left:32,back:48},frameRate:3},walk:{startFrames:{front:1,right:17,left:33,back:49},frameRate:7},damage:{startFrames:{front:2,right:18,left:34,back:50},frameRate:7},death:{startFrames:{front:3,right:19,left:35,back:51},frameRate:7}};for(const[t,{startFrames:l,frameRate:c}]of Object.entries(R))P.forEach(i=>{const r=l[i];this.anims.create({key:`${t}-${i}`,frames:[{key:"character",frame:r},{key:"character",frame:r+4},{key:"character",frame:r+8},{key:"character",frame:r+12}],frameRate:c,repeat:t==="death"?0:t==="damage"?1:-1})});this.player=this.physics.add.sprite(48,80,"character"),this.player.isDead=!1,this.player.setScale(2),this.player.body.setSize(10,10).setOffset(11,13),this.player.setCollideWorldBounds(!0),this.player.setPipeline("Light2D"),this.playerLight=this.lights.addLight(this.player.x,this.player.y,100,16759418,.5),this.cursors=this.input.keyboard.createCursorKeys(),this.wasd=this.input.keyboard.addKeys({up:k.Input.Keyboard.KeyCodes.W,left:k.Input.Keyboard.KeyCodes.A,down:k.Input.Keyboard.KeyCodes.S,right:k.Input.Keyboard.KeyCodes.D}),this.lastFacedDirection="idle-front",this.player.play(this.lastFacedDirection),w.objects.forEach(t=>{const l=this.add.rectangle(t.x+t.width/2,t.y+t.height/2,t.width,t.height);this.physics.add.existing(l,!0),this.physics.add.collider(this.player,l)}),this.anims.create({key:"crate-explode",frames:[{key:"crate",frame:0},{key:"crate",frame:1},{key:"crate",frame:2},{key:"crate",frame:3},{key:"crate",frame:4}],frameRate:10,repeat:0});function m(t,l,c,i,r,x,C){const E=l.width,u=l.height;let A=0;const L=new Set;for(let v=0;v<u;v++)for(let g=0;g<E;g++){if(A>=x)return L;const H=Q(g,v);if(!c.has(H)&&Math.random()<C){const J=l.tileToWorldX(g),S=l.tileToWorldY(v),U=t.physics.add.sprite(J+l.tileWidth/2,S+l.tileHeight/2,r);U.body.moves=!1,U.setPipeline("Light2D"),U.setTint(11184810),i.add(U),A++,L.add(H)}}return L}const B=250,F=.85;this.crates=this.physics.add.group(),T=m(this,a,this.blockedTiles,this.crates,"crate",B,F),this.physics.add.collider(this.player,this.crates),this.anims.create({key:"bomb-idle",frames:this.anims.generateFrameNumbers("bomb",{start:0,end:7}),frameRate:10,repeat:-1}),this.spaceKey=this.input.keyboard.addKey(k.Input.Keyboard.KeyCodes.SPACE),this.bombs=this.physics.add.group(),this.occupiedBombTile=new Set,this.bombCount=5,this.bombsPlaced=0,this.anims.create({key:"explosion-origin",frames:[{key:"explosion",frame:0},{key:"explosion",frame:7},{key:"explosion",frame:14},{key:"explosion",frame:21},{key:"explosion",frame:28},{key:"explosion",frame:35},{key:"explosion",frame:42},{key:"explosion",frame:49},{key:"explosion",frame:56},{key:"explosion",frame:63},{key:"explosion",frame:70},{key:"explosion",frame:77},{key:"explosion",frame:84}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-mid-vertical",frames:[{key:"explosion",frame:1},{key:"explosion",frame:8},{key:"explosion",frame:15},{key:"explosion",frame:22},{key:"explosion",frame:29},{key:"explosion",frame:36},{key:"explosion",frame:43},{key:"explosion",frame:50},{key:"explosion",frame:57},{key:"explosion",frame:64},{key:"explosion",frame:71},{key:"explosion",frame:78},{key:"explosion",frame:85}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-mid-horizontal",frames:[{key:"explosion",frame:2},{key:"explosion",frame:9},{key:"explosion",frame:16},{key:"explosion",frame:23},{key:"explosion",frame:30},{key:"explosion",frame:37},{key:"explosion",frame:44},{key:"explosion",frame:51},{key:"explosion",frame:58},{key:"explosion",frame:65},{key:"explosion",frame:72},{key:"explosion",frame:79},{key:"explosion",frame:86}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-up",frames:[{key:"explosion",frame:3},{key:"explosion",frame:10},{key:"explosion",frame:17},{key:"explosion",frame:24},{key:"explosion",frame:31},{key:"explosion",frame:38},{key:"explosion",frame:45},{key:"explosion",frame:52},{key:"explosion",frame:59},{key:"explosion",frame:66},{key:"explosion",frame:73},{key:"explosion",frame:80},{key:"explosion",frame:87}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-down",frames:[{key:"explosion",frame:4},{key:"explosion",frame:11},{key:"explosion",frame:18},{key:"explosion",frame:25},{key:"explosion",frame:32},{key:"explosion",frame:39},{key:"explosion",frame:46},{key:"explosion",frame:53},{key:"explosion",frame:60},{key:"explosion",frame:67},{key:"explosion",frame:74},{key:"explosion",frame:81},{key:"explosion",frame:88}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-left",frames:[{key:"explosion",frame:5},{key:"explosion",frame:12},{key:"explosion",frame:19},{key:"explosion",frame:26},{key:"explosion",frame:33},{key:"explosion",frame:40},{key:"explosion",frame:47},{key:"explosion",frame:54},{key:"explosion",frame:61},{key:"explosion",frame:68},{key:"explosion",frame:75},{key:"explosion",frame:82},{key:"explosion",frame:89}],frameRate:20,repeat:0}),this.anims.create({key:"explosion-end-right",frames:[{key:"explosion",frame:6},{key:"explosion",frame:13},{key:"explosion",frame:20},{key:"explosion",frame:27},{key:"explosion",frame:34},{key:"explosion",frame:41},{key:"explosion",frame:48},{key:"explosion",frame:55},{key:"explosion",frame:62},{key:"explosion",frame:69},{key:"explosion",frame:76},{key:"explosion",frame:83},{key:"explosion",frame:90}],frameRate:20,repeat:0}),this.explosionRadius=7}function q(){if(this.player.isDead)return;const a=80,o=this.player,f=this.cursors,n=this.wasd;if(o.setVelocity(0),[f.left.isDown||n.left.isDown,f.right.isDown||n.right.isDown,f.up.isDown||n.up.isDown,f.down.isDown||n.down.isDown].filter(Boolean).length>1){o.play(this.lastFacedDirection,!0);return}f.left.isDown||n.left.isDown?(o.setVelocityX(-80),o.anims.play("walk-left",!0),this.lastFacedDirection="idle-left"):f.right.isDown||n.right.isDown?(o.setVelocityX(a),o.anims.play("walk-right",!0),this.lastFacedDirection="idle-right"):f.up.isDown||n.up.isDown?(o.setVelocityY(-80),o.anims.play("walk-back",!0),this.lastFacedDirection="idle-back"):f.down.isDown||n.down.isDown?(o.setVelocityY(a),o.anims.play("walk-front",!0),this.lastFacedDirection="idle-front"):o.play(this.lastFacedDirection,!0),this.playerLight.x=this.player.x,this.playerLight.y=this.player.y;function p(e,h,y,I,D){const w=new Set,d=new Map,b=new Map;let P=Q(y.x,y.y);const R=[{x:0,y:-1,name:"up",mid:"vertical"},{x:0,y:1,name:"down",mid:"vertical"},{x:-1,y:0,name:"left",mid:"horizontal"},{x:1,y:0,name:"right",mid:"horizontal"}];R.forEach(m=>{var F;let B=null;for(let t=1;t<=D;t++){const l=y.x+m.x*t,c=y.y+m.y*t,i=Q(l,c);if(I.has(i))break;if(T.has(i)){w.add(i),d.set(i,m.mid);const[r,x]=i.split(",").map(Number),C=h.tileToWorldX(r)+h.tileWidth/2,E=h.tileToWorldY(x)+h.tileHeight/2,u=e.crates.getChildren().find(A=>k.Math.Fuzzy.Equal(A.x,C,1)&&k.Math.Fuzzy.Equal(A.y,E,1));u&&(u.play("crate-explode"),u.on("animationcomplete",()=>{u.destroy()})),T.delete(i);break}w.add(i),d.set(i,m.mid),B=i}B&&b.set(B,((F=R.find(t=>Q(y.x+t.x*D,y.y+t.y*D)===B))==null?void 0:F.name)||m.name)}),w.add(P),w.forEach(m=>{const[B,F]=m.split(",").map(Number),t=h.tileToWorldX(B)+h.tileWidth/2,l=h.tileToWorldY(F)+h.tileHeight/2;let c="explosion-mid-horizontal";m===P?c="explosion-origin":b.has(m)?c=`explosion-end-${b.get(m)}`:c=`explosion-mid-${d.get(m)}`;const i=e.physics.add.sprite(t,l,"explosion");e.explosions||(e.explosions=e.physics.add.group()),e.explosions.add(i),e.physics.add.overlap(e.player,i,()=>{if(!e.player.isDead){e.player.isDead=!0,e.player.setVelocity(0);const r=e.lastFacedDirection.replace("idle-","");e.player.anims.play(`damage-${r}`,!0),e.time.delayedCall(500,()=>{e.player.anims.play(`death-${r}`,!0)}),e.player.body.enable=!1,e.time.delayedCall(1200,()=>{e.player.destroy()})}},null,e),i.setTint(16773058),i.setBlendMode(k.BlendModes.ADD),i.play(c),i.on("animationcomplete",()=>{i.destroy()})})}if(this.spaceKey,k.Input.Keyboard.JustDown(this.spaceKey)){const e=this.player.getCenter(),h=this.map.worldToTileXY(e.x,e.y),y=`${h.x},${h.y}`;if(this.occupiedBombTile.has(y)||this.bombsPlaced>=this.bombCount)return;const I=this.map.tileToWorldXY(h.x,h.y),D=I.x+this.map.tileWidth/2,w=I.y+this.map.tileHeight/2,d=this.physics.add.sprite(D,w,"bomb");d.play("bomb-idle");const b=this.add.sprite(d.x,d.y,"bombGlow");b.setScale(1.8),b.setAlpha(.5),b.setDepth(d.depth-1),d.setTint(16764057),this.bombs.add(d),this.occupiedBombTile.add(y),this.bombsPlaced++,this.time.delayedCall(3500,()=>{this.occupiedBombTile.delete(y),this.lights.removeLight(d.light),this.bombsPlaced--,d.destroy(),p(this,this.map,h,this.blockedWallTiles,this.explosionRadius)})}}new k.Game(O);
